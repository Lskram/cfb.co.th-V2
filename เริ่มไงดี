fb.co.th-V2 ‚Äî Django + Docker (‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÇ‡∏Ñ‡∏ï‡∏£‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Django ‡∏£‡∏±‡∏ô‡∏ö‡∏ô Docker Compose (web + db + nginx)
‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á Windows / macOS / Linux ‡πÇ‡∏î‡∏¢‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ô‡∏µ‡πâ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ Windows + PowerShell + Docker Desktop

0) ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏° (Requirements)

Docker Desktop ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (WSL2 ‡∏ö‡∏ô Windows)

Git (‡πÑ‡∏ß‡πâ clone ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå)

(‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö) Python ‚Äî ‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡πà‡∏™‡∏∏‡πà‡∏° SECRET_KEY ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡πÜ

‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Docker ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:

docker --version
wsl -l -v     # ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô docker-desktop = Running, VERSION=2

1) Clone ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
git clone <URL-repo-‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì>
cd cfb.co.th-V2


‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ CRLF/LF (Windows): ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ Linux line endings (LF) ‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå shell/config ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ Docker ‡∏û‡∏±‡∏á
‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ git add ‡∏ß‡πà‡∏≤ ‚ÄúLF will be replaced by CRLF‚Äù ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏ï‡∏≤‡∏° ‚Äú‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å A‚Äù ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ LF

2) ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .env.docker (‡∏≠‡∏¢‡πà‡∏≤ commit)

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÅ‡∏¢‡∏Å‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏ô‡∏ü‡∏¥‡∏Å‡πÑ‡∏ß‡πâ‡πÉ‡∏ô .env.docker (‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≠‡∏ô‡∏£‡∏±‡∏ô‡πÉ‡∏ô Docker)
‡πÉ‡∏´‡πâ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå ‡∏ô‡∏µ‡πâ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÄ‡∏≠‡∏á:

notepad .env.docker


‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô DJANGO_SECRET_KEY ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á):

DJANGO_DEBUG=0
DJANGO_SECRET_KEY=please-change-me
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1
DATABASE_URL=postgresql://postgres:postgres@db:5432/postgres
TZ=Asia/Bangkok


‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ SECRET_KEY ‡πÄ‡∏£‡πá‡∏ß ‡πÜ:

python - <<PY
import secrets,string
a=string.ascii_letters+string.digits+string.punctuation
print(''.join(secrets.choice(a) for _ in range(64)))
PY

3) ‡πÇ‡∏Ñ‡∏£‡∏á Compose ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ

db = Postgres (‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)

web = Django + Gunicorn (‡∏ï‡∏±‡∏ß‡∏£‡∏±‡∏ô‡πÅ‡∏≠‡∏õ)

nginx = Reverse proxy + ‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü static/media

‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:

templates/ = ‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï HTML ‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ‡∏Ñ‡∏∏‡∏ì

static/ = ‡πÑ‡∏ü‡∏•‡πå static ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)

staticfiles/ = ‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏•‡∏±‡∏á collectstatic (Django admin ‡∏Å‡πá‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà)

media/ = ‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

entrypoint.sh = ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ö‡∏π‡∏ï: ‡∏£‡∏≠ DB ‚Üí collectstatic ‚Üí migrate ‚Üí ‡∏£‡∏±‡∏ô Gunicorn

4) ‡∏£‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å (Build & Up)

‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏±‡∏ô ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î Docker Desktop ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô

docker compose up --build


‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡πÉ‡∏ô log:

db ‚Üí healthy

web ‚Üí ‡∏°‡∏µ collectstatic, migrate, ‡πÅ‡∏•‡πâ‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô Booting worker with pid ...

nginx ‚Üí listening on port 80

‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏±‡∏ô‡πÅ‡∏ö‡∏ö‡∏â‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á (‡πÑ‡∏°‡πà‡∏ú‡∏π‡∏Å‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á terminal):

docker compose up -d --build

5) ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ß‡πá‡∏ö

Web: http://localhost

Django Admin: http://localhost/admin

‡∏ñ‡πâ‡∏≤‡∏û‡∏≠‡∏£‡πå‡∏ï 80 ‡∏ä‡∏ô ‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ docker-compose.yml ‡∏Ç‡∏≠‡∏á nginx ‡∏à‡∏≤‡∏Å "80:80" ‡πÄ‡∏õ‡πá‡∏ô "8080:80" ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤ http://localhost:8080

6) ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
docker compose exec web bash -lc "python manage.py createsuperuser"


‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ /admin ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢

‡∏ñ‡πâ‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ (‡πÄ‡∏û‡∏£‡∏≤‡∏∞ LANGUAGE_CODE="th" ‡πÉ‡∏ô settings.py)
‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô "en-us" ‡πÅ‡∏•‡πâ‡∏ß docker compose restart web

7) ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Docker ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢ (‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ó‡∏µ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)
‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ & ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
docker compose ps              # ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
docker compose logs -f web     # ‡∏î‡∏π log ‡∏Ç‡∏≠‡∏á web ‡πÅ‡∏ö‡∏ö real-time (‡∏Å‡∏î Ctrl+C ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏≠‡∏Å)
docker compose logs -f nginx
docker compose logs -f db

‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î/‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó
docker compose up -d           # ‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏ö‡∏ö‡∏â‡∏≤‡∏Å‡∏´‡∏•‡∏±‡∏á
docker compose stop            # ‡∏´‡∏¢‡∏∏‡∏î‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå (‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà)
docker compose start           # ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà‡∏´‡∏•‡∏±‡∏á stop
docker compose restart web     # ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏â‡∏û‡∏≤‡∏∞ service web
docker compose down            # ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏•‡∏ö‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå (‡πÑ‡∏°‡πà‡∏•‡∏ö volume)
docker compose down -v         # ‡∏õ‡∏¥‡∏î + ‡∏•‡∏ö volumes (‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏™‡∏∞‡∏≠‡∏≤‡∏î)

‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•/‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Django ‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå
docker compose exec web bash                       # ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏•‡πà‡∏≠‡∏á shell ‡∏Ç‡∏≠‡∏á web
docker compose exec web bash -lc "python manage.py migrate"
docker compose exec web bash -lc "python manage.py collectstatic --noinput"
docker compose exec web bash -lc "python manage.py createsuperuser"

‡∏î‡∏∂‡∏á‡∏†‡∏≤‡∏û (‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÇ‡∏î‡∏ô proxy/firewall ‡∏Ç‡∏ß‡∏≤‡∏á)
docker pull nginx:1.27-alpine
docker pull postgres:16

8) Static/Admin CSS ‡πÑ‡∏°‡πà‡∏°‡∏≤? (‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏ä‡πá‡∏Å‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß)

‡∏Å. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤ collectstatic ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏£‡∏¥‡∏á

docker compose exec web ls -la /app/staticfiles/admin/css | head -n 20
# ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô base.css, login.css ‡∏Ø‡∏•‡∏Ø


‡∏Ç. nginx ‡πÄ‡∏´‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå static ‡∏à‡∏≤‡∏Å volume ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

docker compose exec nginx ls -la /vol/static/admin/css | head -n 20


‡∏Ñ. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô HTTP Header ‡∏ñ‡∏π‡∏Å (‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô text/css)

# ‡πÉ‡∏ô PowerShell ‡πÉ‡∏ä‡πâ iwr ‡πÅ‡∏ó‡∏ô curl
Invoke-WebRequest -Uri http://localhost/static/admin/css/base.css -Method Head
# Content-Type: text/css  ‚Üê ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ


‡∏á. ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏≤? ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó nginx + ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå cache

docker compose exec nginx sh -lc "nginx -t"
docker compose restart nginx


‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î /admin ‡πÉ‡∏ô Incognito ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î DevTools ‚Üí Network ‚Üí Disable cache ‚Üí Ctrl+F5

9) ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£?

‡∏ñ‡πâ‡∏≤ docker-compose.yml ‡∏ï‡∏±‡πâ‡∏á restart: unless-stopped ‡πÅ‡∏•‡πâ‡∏ß (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏™‡πà‡∏ó‡∏±‡πâ‡∏á db, web, nginx)
‡πÄ‡∏°‡∏∑‡πà‡∏≠ Docker Desktop ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå‡∏à‡∏∞‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏≠‡∏á

‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡πà‡∏á‡πÄ‡∏≠‡∏á:

docker compose up -d

10) ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ

‡∏£‡∏≠ DB ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡πÉ‡∏ô entrypoint.sh ‡πÉ‡∏ä‡πâ nc -z db 5432)

collectstatic & migrate ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡πÄ‡∏ô‡∏≠‡∏£‡πå web ‡∏Ç‡∏∂‡πâ‡∏ô

Nginx ‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü static/media ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤‡πÉ‡∏´‡πâ Django ‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏≠‡∏á)

‡∏õ‡∏£‡∏±‡∏ö LANGUAGE_CODE, TIME_ZONE ‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ó‡∏¢ (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡πÑ‡∏î‡πâ)

11) ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡πÜ)
.
‚îú‚îÄ home/                     # ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Django app (‡πÅ‡∏Å‡πâ/‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏à‡∏£‡∏¥‡∏á)
‚îú‚îÄ mysite/                   # Django project (settings.py ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà)
‚îú‚îÄ templates/                # ‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï HTML
‚îú‚îÄ static/                   # static ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏Ñ‡∏∏‡∏ì (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏∞‡∏ß‡πà‡∏≤‡∏á)
‚îú‚îÄ staticfiles/              # (‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥) ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏ß‡∏°‡∏´‡∏•‡∏±‡∏á collectstatic
‚îú‚îÄ media/                    # ‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î
‚îú‚îÄ Dockerfile                # ‡∏≠‡∏¥‡∏°‡πÄ‡∏°‡∏à web
‚îú‚îÄ docker-compose.yml        # ‡∏£‡∏ß‡∏° db/web/nginx
‚îú‚îÄ docker-compose.override.yml (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
‚îú‚îÄ nginx.conf                # Config ‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü static/media + reverse proxy
‚îú‚îÄ entrypoint.sh             # ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ö‡∏π‡∏ï web
‚îú‚îÄ requirements.txt
‚îú‚îÄ .gitattributes            # ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ LF ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
‚îú‚îÄ .gitignore                # ‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÑ‡∏ü‡∏•‡πå‡∏•‡∏±‡∏ö/‡∏ê‡∏≤‡∏ô dev ‡∏Ç‡∏∂‡πâ‡∏ô repo
‚îî‚îÄ .env.docker               # (‡∏Ñ‡∏∏‡∏ì‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏á ‡∏´‡πâ‡∏≤‡∏° commit)

12) ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Windows + PowerShell

curl ‡πÉ‡∏ô PowerShell ‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡∏Ñ‡∏∑‡∏≠ Invoke-WebRequest (‡∏¢‡πà‡∏≠ iwr)
‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ curl ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ó‡πâ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ curl.exe

CRLF ‡∏ó‡∏≥‡πÉ‡∏´‡πâ shell script ‡∏£‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‚Üí ‡πÉ‡∏ä‡πâ LF ‡πÄ‡∏™‡∏°‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö .sh, Dockerfile, .conf, .yml
(‡πÇ‡∏Ñ‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏µ .gitattributes ‡∏Ñ‡∏∏‡∏°‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß)

13) ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç!)

‡∏≠‡∏¢‡πà‡∏≤ commit: .env, .env.docker, db.sqlite3, media/, staticfiles/

‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô DJANGO_SECRET_KEY ‡πÄ‡∏™‡∏°‡∏≠‡∏Å‡πà‡∏≠‡∏ô deploy ‡∏à‡∏£‡∏¥‡∏á

‡∏ï‡∏±‡πâ‡∏á DJANGO_ALLOWED_HOSTS ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏î‡πÄ‡∏°‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏õ Production

‡πÄ‡∏õ‡∏¥‡∏î HTTPS (‡πÄ‡∏ä‡πà‡∏ô Caddy ‡∏´‡∏£‡∏∑‡∏≠ Nginx + Certbot) ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡∏∂‡πâ‡∏ô‡πÇ‡∏Æ‡∏™‡∏ï‡πå‡∏à‡∏£‡∏¥‡∏á

‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å A ‚Äî ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Git ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö LF ‡∏ö‡∏ô Windows

‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô CRLF ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Docker/Linux ‡∏û‡∏±‡∏á:

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå .gitattributes (‡∏ó‡∏µ‡πà root):

* text=auto
*.sh text eol=lf
*.py text eol=lf
*.yml text eol=lf
*.conf text eol=lf
*.dockerignore text eol=lf
Dockerfile text eol=lf


‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô LF (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß):

(Get-Content .\entrypoint.sh -Raw).Replace("`r`n","`n") | Set-Content .\entrypoint.sh -NoNewline
(Get-Content .\nginx.conf -Raw).Replace("`r`n","`n")     | Set-Content .\nginx.conf -NoNewline
(Get-Content .\docker-compose.yml -Raw).Replace("`r`n","`n") | Set-Content .\docker-compose.yml -NoNewline


‡∏õ‡∏¥‡∏î auto CRLF (‡∏£‡∏∞‡∏î‡∏±‡∏ö repo):

git config core.autocrlf false

‡∏†‡∏≤‡∏Ñ‡∏ú‡∏ô‡∏ß‡∏Å B ‚Äî ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á ‚Äú‡∏•‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏´‡∏°‡∏î‚Äù (‡∏Å‡∏£‡∏ì‡∏µ‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏®‡∏π‡∏ô‡∏¢‡πå)
docker compose down -v
docker compose up --build


‡∏à‡∏ö! üéâ
‡∏î‡πâ‡∏ß‡∏¢ README ‡∏ô‡∏µ‡πâ ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ Clone ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÑ‡∏õ‡∏ó‡∏≥‡∏ó‡∏µ‡πà‡∏ö‡πâ‡∏≤‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ô Docker + ‡πÄ‡∏õ‡∏¥‡∏î /admin ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏ñ‡πâ‡∏≤‡∏ï‡∏¥‡∏î‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô ‡∏Å‡πä‡∏≠‡∏õ log ‡∏°‡∏≤‡∏ß‡∏≤‡∏á ‡∏ú‡∏°‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏•‡πà‡πÅ‡∏Å‡πâ‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡∏•‡∏∞‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏Ñ‡∏£‡∏±‡∏ö üîßüöÄ

